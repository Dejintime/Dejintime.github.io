<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>算法基础：数组与高精度</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link rel="stylesheet" href="/assets/css/github-style.css">
  <link rel="icon" href="/assets/images/touxiang.jpg" type="image/jpeg">
  <link rel="shortcut icon" href="/assets/images/touxiang.jpg" type="image/jpeg">
  
  <!-- 添加 MathJax 支持 -->
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  
  <!-- 添加代码高亮支持 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  
  <!-- GitHub样式页面交互脚本 -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // 分类标签切换
    const categoryTabs = document.querySelectorAll('.category-tab');
    
    if (categoryTabs.length > 0) {
      categoryTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          // 移除所有active类
          categoryTabs.forEach(t => t.classList.remove('active'));
          
          // 给当前点击的标签添加active类
          this.classList.add('active');
          
          // 获取对应的内容ID
          const categoryId = this.getAttribute('data-category');
          
          // 隐藏所有内容
          document.querySelectorAll('.category-content').forEach(content => {
            content.classList.remove('active');
          });
          
          // 显示对应内容
          document.getElementById(categoryId + '-content').classList.add('active');
        });
      });
    }
  });
  </script>
</head>
<body class="site-container dark-theme">
  <header class="site-header">
    <header class="navbar">
  <div class="navbar-brand">
    <a href="/" class="navbar-logo">
      <img src="/assets/images/touxiang.jpg" alt="dejin" class="navbar-logo-img">
      <span>dejin的博客</span>
    </a>
  </div>
  <nav class="navbar-menu">
    
      <a href="/" class="navbar-item">
        首页
      </a>
    
      <a href="/blog.html" class="navbar-item">
        Blog
      </a>
    
      <a href="/staff.html" class="navbar-item">
        dejin
      </a>
    
  </nav>
</header>
  </header>
  <main class="site-main">
    <script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script> 

<div class="github-style-container">
  <div class="post-wrapper">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">算法基础：数组与高精度</h1>
        <div class="post-meta">
          <time datetime="2025-05-06T00:00:00+00:00">
            2025年05月06日
          </time>
          
          
            <span class="post-author">
              作者：<a href="/authors/dejin.html">Dejintime</a>
            </span>
          
        </div>
      </header>
    
      <div class="post-content">
        <h1 id="这是一个关于算法基础篇的讲解与实战练习">这是一个关于算法基础篇的讲解与实战练习</h1>

<h1 id="31-数组与高精度">3.1 数组与高精度</h1>

<h2 id="311-ab-problem高精">3.1.1 A+B Problem（高精）</h2>

<h2 id="题目描述">题目描述</h2>

<p>高精度加法，相当于 a+b problem，<strong>不用考虑负数</strong>。</p>

<h3 id="输入格式">输入格式</h3>

<p>分两行输入。$ a,b \leq 10^{500} $。</p>

<h3 id="输出格式">输出格式</h3>

<p>输出只有一行，代表 $a+b$ 的值。</p>

<h4 id="样例-1">样例 #1</h4>

<h4 id="样例输入-1">样例输入 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
1
</code></pre></div></div>

<h4 id="样例输出-1">样例输出 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2
</code></pre></div></div>

<h4 id="样例-2">样例 #2</h4>

<h4 id="样例输入-2">样例输入 #2</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1001
9099
</code></pre></div></div>

<h4 id="样例输出-2">样例输出 #2</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10100
</code></pre></div></div>

<h4 id="提示">提示</h4>

<p>$20\%$ 的测试数据，$0\le a,b \le10^9$；</p>

<p>$40\%$ 的测试数据，$0\le a,b \le10^{18}$。</p>

<h2 id="解题思路">解题思路</h2>

<p>此问题的核心是高精度加法（add），需要处理超大整数的加法操作，数字最大可能达到500位，现在采用字符串存储各个位上的数字进行模拟加法运算。</p>

<h4 id="1-输入处理">(1) 输入处理</h4>
<p>输入数字$a$ , $b$, 并存储为字符串 $sa, sb$ ,此时数字高位存储在字符串的低位，数字低位则与之相反。</p>

<h4 id="2-反转数字存储">(2) 反转数字存储</h4>
<p>为了便于加法计算，通常将数字从最低位开始存储，并将字符串转为数字数组。</p>

<p>$sa$存储到数组 $a$ ，$sb$ 存储到数组 $b$。</p>

<p>例如，数字 <code class="language-plaintext highlighter-rouge">12345</code> 可以存储为 <code class="language-plaintext highlighter-rouge">5 4 3 2 1</code>，从右到左。这样加法时，就能从最低位开始逐位计算。</p>

<h4 id="3-模拟加法过程">(3) 模拟加法过程</h4>
<p>加法过程是逐位进行的。对于每一位的加法，需要考虑进位：</p>

<ul>
  <li>将对应位的数字相加到数组 $a[i]$ ,  $a[i] = a[i] + b[i]$ 。</li>
  <li>如果某一位相加的结果大于等于10，就会产生进位，所以此时下一位进位 $a[i+1] = a[i] / 10$</li>
  <li>相加进位后的 $a[i] = a[i] \% 10$</li>
</ul>

<h4 id="4-处理不同位数的情况">(4) 处理不同位数的情况</h4>
<p>将加法后的结果 <code class="language-plaintext highlighter-rouge">ans</code> 长度设置为较长数组的长度<code class="language-plaintext highlighter-rouge">max_len</code>,循环依次相加每一位，若位数不够则添0相加。</p>

<h4 id="5-最后处理进位">(5) 最后处理进位</h4>
<p>加完最后一位后，如果最后的进位不为0，那么需要增加一位，即<code class="language-plaintext highlighter-rouge">max_len++</code>。</p>

<h4 id="6-构造结果字符串">(6) 构造结果字符串</h4>
<p>最后，通过反转数组得到加法的结果并构造出一个字符串。</p>

<h2 id="代码实现">代码实现</h2>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">1005</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1005</span><span class="p">];</span>
<span class="n">string</span> <span class="nf">add</span><span class="p">(</span><span class="n">string</span> <span class="n">sa</span><span class="p">,</span> <span class="n">string</span> <span class="n">sb</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">len_a</span> <span class="o">=</span> <span class="n">sa</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">len_b</span> <span class="o">=</span> <span class="n">sb</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">len_a</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sa</span><span class="p">[</span><span class="n">len_a</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">len_b</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sb</span><span class="p">[</span><span class="n">len_b</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">max_len</span> <span class="o">=</span> <span class="n">len_a</span> <span class="o">&gt;</span> <span class="n">len_b</span> <span class="o">?</span> <span class="n">len_a</span> <span class="o">:</span> <span class="n">len_b</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">max_len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="c1">//</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="c1">//将两数字相加</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="mi">10</span><span class="p">;</span> <span class="c1">//进位1</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">%</span><span class="mi">10</span><span class="p">;</span><span class="c1">//取10的余数</span>
        <span class="c1">//</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">max_len</span><span class="p">])</span><span class="n">max_len</span><span class="o">++</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">ans</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">max_len</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">ans</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">string</span> <span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">sa</span> <span class="o">&gt;&gt;</span> <span class="n">sb</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">add</span><span class="p">(</span><span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="312-a-b-problem高精">3.1.2 A-B Problem(高精)</h2>

<h2 id="题目描述-1">题目描述</h2>

<p>高精度减法。</p>

<h3 id="输入格式-1">输入格式</h3>

<p>两个整数 $a,b$（第二个可能比第一个大）。</p>

<h3 id="输出格式-1">输出格式</h3>

<p>结果（是负数要输出负号）。</p>

<h4 id="样例-1-1">样例 #1</h4>

<h4 id="样例输入-1-1">样例输入 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2
1
</code></pre></div></div>

<h4 id="样例输出-1-1">样例输出 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
</code></pre></div></div>

<h4 id="提示-1">提示</h4>

<ul>
  <li>$20\%$ 数据 $a,b$ 在 long long 范围内；</li>
  <li>$100\%$ 数据 $0&lt;a,b\le 10^{10086}$。</li>
</ul>

<h2 id="解题思路-1">解题思路</h2>

<p>此题是高精度的减法，位数最高可能到10068，A-B也可能存在负数。将输入的AB两数字存入到字符串<code class="language-plaintext highlighter-rouge">sa sb</code> 之中进行减法计算。</p>

<h4 id="1-数据输入">(1) 数据输入</h4>

<p>将AB数字存入字符串<code class="language-plaintext highlighter-rouge">sa sb</code></p>

<h4 id="2-反转数字存储-1">(2) 反转数字存储</h4>

<p>创建数组<code class="language-plaintext highlighter-rouge">a[10010],b[10010]</code> ，反转字符串并存储为整数到数组中</p>

<h4 id="3-将较大的数字存储在a数组中">(3) 将较大的数字存储在a数组中</h4>

<p>设置一个布尔变量<code class="language-plaintext highlighter-rouge">neg = false</code> 表示结果是否为负值，比较数字A和B的大小，较大的数字存储在数组a中，若a与b数组的值进行了交换，则说明a存储了较小的数字A，需要进行交换，且结果为负数，令<code class="language-plaintext highlighter-rouge">neg = true</code>。</p>

<h4 id="4-逐位相减注意模拟借位操作">(4) 逐位相减，注意模拟借位操作</h4>

<p>数组a逐位与数组b进行相减，若相减的结果小于0，则需要借位，具体逻辑如下：</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">max_len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
  	<span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">){</span>
				<span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">--</span><span class="p">;</span>
      	<span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="5-除去相减之后为0的冗余部分-更新相减结果长度">(5) 除去相减之后为0的冗余部分, 更新相减结果长度</h4>

<h4 id="6-打印输出结果">(6) 打印输出结果</h4>

<h2 id="代码实现-1">代码实现</h2>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">10100</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">10100</span><span class="p">];</span>
<span class="n">string</span> <span class="nf">sub</span><span class="p">(</span><span class="n">string</span> <span class="n">sa</span><span class="p">,</span> <span class="n">string</span> <span class="n">sb</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">sa</span> <span class="o">==</span> <span class="n">sb</span><span class="p">)</span><span class="k">return</span> <span class="s">"0"</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">negative</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">sa</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">sb</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">||</span> <span class="p">(</span><span class="n">sa</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">sb</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">sa</span><span class="o">&lt;</span><span class="n">sb</span><span class="p">)){</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">);</span>
        <span class="n">negative</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">len_a</span> <span class="o">=</span> <span class="n">sa</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">len_b</span> <span class="o">=</span> <span class="n">sb</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">len_a</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sa</span><span class="p">[</span><span class="n">len_a</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">len_b</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sb</span><span class="p">[</span><span class="n">len_b</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">max_len</span> <span class="o">=</span> <span class="n">len_a</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">max_len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">){</span>
            <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">--</span><span class="p">;</span>
            <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">a</span><span class="p">[</span><span class="o">--</span><span class="n">max_len</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">max_len</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">max_len</span><span class="o">++</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">ans</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">max_len</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">ans</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">negative</span><span class="p">)</span> <span class="n">ans</span> <span class="o">=</span> <span class="sc">'-'</span> <span class="o">+</span> <span class="n">ans</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">string</span> <span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">sa</span> <span class="o">&gt;&gt;</span> <span class="n">sb</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">sub</span><span class="p">(</span><span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="313-ab-problem">3.1.3 A*B Problem</h2>

<h2 id="题目背景">题目背景</h2>

<p>高精度乘法模板题。</p>

<h3 id="题目描述-2">题目描述</h3>

<p>给出两个非负整数，求它们的乘积。</p>

<h3 id="输入格式-2">输入格式</h3>

<p>输入共两行，每行一个非负整数。</p>

<h3 id="输出格式-2">输出格式</h3>

<p>输出一个非负整数表示乘积。</p>

<h4 id="样例-1-2">样例 #1</h4>

<h4 id="样例输入-1-2">样例输入 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 
2
</code></pre></div></div>

<h4 id="样例输出-1-2">样例输出 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2
</code></pre></div></div>

<h4 id="提示-2">提示</h4>

<p>每个非负整数不超过 $10^{2000}$。</p>

<h2 id="解题思路-2">解题思路</h2>

<h3 id="1-数据输入-1">(1) 数据输入</h3>

<p>输入数据A、B分别存储在字符串sa、sb中；</p>

<h3 id="2-数据存储">(2) 数据存储</h3>

<p>将字符串sa，sb的数据反向存储到数组a、b中；</p>

<h3 id="3-模拟乘法运算">(3) 模拟乘法运算</h3>

<ul>
  <li>
    <p>创建数组c存储运算结果，分别依次遍历数组a，b相乘<code class="language-plaintext highlighter-rouge">a[i] * b[i]</code> 存储到数组c 即：c[i+j]` ；</p>
  </li>
  <li>遍历数组c 处理进位;</li>
  <li><code class="language-plaintext highlighter-rouge">c[i+1] += c[i]/10; c[i] = c[i]%10;</code></li>
</ul>

<h3 id="4反转数组转化为字符串输出结果">(4)反转数组转化为字符串输出结果</h3>

<h2 id="代码实现-2">代码实现</h2>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">2005</span><span class="p">],</span><span class="n">b</span><span class="p">[</span><span class="mi">2006</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">4006</span><span class="p">];</span>
<span class="n">string</span> <span class="nf">mul</span><span class="p">(</span><span class="n">string</span> <span class="n">sa</span><span class="p">,</span> <span class="n">string</span> <span class="n">sb</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">sa</span> <span class="o">==</span> <span class="s">"0"</span> <span class="o">||</span> <span class="n">sb</span> <span class="o">==</span> <span class="s">"0"</span><span class="p">)</span> <span class="k">return</span> <span class="s">"0"</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">len_a</span> <span class="o">=</span> <span class="n">sa</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">len_b</span> <span class="o">=</span> <span class="n">sb</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">len_a</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sa</span><span class="p">[</span><span class="n">len_a</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">len_b</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sb</span><span class="p">[</span><span class="n">len_b</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">len_a</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">len_b</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
            <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">len_a</span> <span class="o">+</span> <span class="n">len_b</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="mi">10</span><span class="p">;</span>
        <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">string</span> <span class="n">ans</span><span class="p">;</span> 
    <span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">len_a</span><span class="o">+</span><span class="n">len_b</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="p">{</span>
        <span class="n">ans</span><span class="o">+=</span><span class="n">c</span><span class="p">[</span><span class="n">len_a</span><span class="o">+</span><span class="n">len_b</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">len_a</span> <span class="o">+</span> <span class="n">len_b</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="n">ans</span> <span class="o">+=</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">string</span> <span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">sa</span> <span class="o">&gt;&gt;</span> <span class="n">sb</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">mul</span><span class="p">(</span><span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="314-ab-problem">3.1.4 A/B problem</h2>

<h2 id="题目描述-3">题目描述</h2>

<p>输入两个整数 $a,b$，输出它们的商。</p>

<h3 id="输入格式-3">输入格式</h3>

<p>两行，第一行是被除数，第二行是除数。</p>

<h3 id="输出格式-3">输出格式</h3>

<p>一行，商的整数部分。</p>

<h4 id="样例-1-3">样例 #1</h4>

<h4 id="样例输入-1-3">样例输入 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10
2
</code></pre></div></div>

<h4 id="样例输出-1-3">样例输出 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
</code></pre></div></div>

<h4 id="提示-3">提示</h4>

<p>$0\le a\le 10^{5000}$，$1\le b\le 10^9$。</p>

<h2 id="解题思路-3">解题思路</h2>

<h3 id="1-数据输入-2">(1) 数据输入</h3>

<p>字符串存储输入数据被除数，长整形存储输入数据除数</p>

<h3 id="2-数据存储-1">(2) 数据存储</h3>

<p>将字符串sa顺序转为数字存放在数组a中，商存放在数组c中</p>

<h3 id="3-模拟除法">(3) 模拟除法</h3>

<p>顺序遍历 <em>被除数</em> 即数组a，运用辗转相除的数学原理进行除法运算</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">long</span> <span class="kt">long</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//初始化被除数为0</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">len_a</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
  <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">*</span><span class="mi">10</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="c1">//每次更新被除数的同时注意更新位数</span>
  <span class="k">if</span><span class="p">(</span><span class="n">d</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//若被除数小于除数，则商0；</span>
  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">/</span><span class="n">b</span><span class="p">;</span><span class="c1">//若被除数大于除数，则求出对应位置的商</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">d</span><span class="o">%</span><span class="n">b</span><span class="p">;</span>   <span class="c1">//注意余数为下一次的被除数</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="4去除前导0">(4)去除前导0</h3>

<p>利用count变量计数为0的个数，去除前导0</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">len_a</span><span class="p">)</span><span class="n">count</span><span class="o">++</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="5转换c数组为字符串结果打印输出">(5)转换c数组为字符串结果打印输出</h3>

<h2 id="代码实现-3">代码实现</h2>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">5020</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">5020</span><span class="p">];</span>
<span class="kt">long</span> <span class="kt">long</span> <span class="n">b</span><span class="p">;</span>
<span class="n">string</span> <span class="nf">div</span><span class="p">(</span><span class="n">string</span> <span class="n">sa</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">sa</span> <span class="o">==</span> <span class="s">"0"</span><span class="p">)</span><span class="k">return</span> <span class="s">"0"</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">len_a</span> <span class="o">=</span> <span class="n">sa</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">len_a</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sa</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">long</span> <span class="kt">long</span> <span class="n">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">len_a</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">*</span><span class="mi">10</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="n">d</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">){</span>
            <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">/</span><span class="n">b</span><span class="p">;</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">%</span><span class="n">b</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">len_a</span><span class="p">)</span><span class="n">count</span><span class="o">++</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">ans</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">len_a</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">ans</span> <span class="o">+=</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">string</span> <span class="n">sa</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">sa</span> <span class="o">&gt;&gt;</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">div</span><span class="p">(</span><span class="n">sa</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="32-stl概述">3.2 STL概述</h1>

<h2 id="321-string库">3.2.1 String库</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">length()</code> return 字符串长度</li>
  <li><code class="language-plaintext highlighter-rouge">size()</code> return 字符串长度</li>
  <li><code class="language-plaintext highlighter-rouge">push_back()</code> 字符串末尾添加字符</li>
  <li><code class="language-plaintext highlighter-rouge">append()</code> 字符串末尾添加字符串</li>
  <li><code class="language-plaintext highlighter-rouge">find(str, pos)</code> return 在字符串pos之后查找返回str第一次出现的位置</li>
  <li><code class="language-plaintext highlighter-rouge">substr(pos, len)</code> return 截取字符串pos位置之后最多长度为len的字符串</li>
  <li><code class="language-plaintext highlighter-rouge">insert(index, str)</code> 在index处插入字符串str</li>
  <li><code class="language-plaintext highlighter-rouge">insert(index, count, str)</code> 在index处插入count次字符串</li>
  <li><code class="language-plaintext highlighter-rouge">erase(index, count)</code> 删除从index位置开始的count个字符</li>
  <li><code class="language-plaintext highlighter-rouge">replace(pos, count, str)</code> 从pos位置开始的count个字符子串换为str</li>
  <li><code class="language-plaintext highlighter-rouge">replace(first, last, str)</code> 从first开始last结束的子串换为str</li>
  <li><code class="language-plaintext highlighter-rouge">empty()</code></li>
</ul>

<h2 id="烬寂海之谜">烬寂海之谜</h2>

<h3 id="问题描述">问题描述</h3>

<p>给定一个字符串S，以及若干模式串P，统计每一个模式串在主串中出现的次数。</p>

<h3 id="输入">输入</h3>

<p>第一行一个字符串S，表示主串，只包含小写英文字母</p>

<p>第二行一个整数n，表示模式串的个数</p>

<p>接下来n行表示n个模式串P</p>

<h3 id="输出">输出</h3>

<p>输出n行整数，每行整数代表对应的模式串在主串中出现的次数</p>

<h3 id="样例输入">样例输入</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bluemooninthedarkmoon
3
moon
blue
dark
</code></pre></div></div>

<h3 id="样例输出">样例输出</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2
1
1
</code></pre></div></div>

<h3 id="测评数据规模">测评数据规模</h3>

<p>主串的长度：$∣S∣≤1×10^5$。</p>

<p>模式串的数量：$1≤n≤100$。</p>

<p>模式串的长度：$∣P∣≤1000$。</p>

<h2 id="核心思路">核心思路</h2>
<h3 id="1-算法选择kmp-算法">1. 算法选择：KMP 算法</h3>
<ul>
  <li><strong>目标</strong>：高效统计每个模式串在主串中的出现次数（允许重叠）</li>
  <li><strong>优势</strong>：预处理模式串生成 LPS （next）数组，将单次匹配复杂度优化到 <strong>O(M + N)</strong></li>
</ul>

<h3 id="2-构建next数组最长前缀后缀数组">2. 构建next数组（最长前缀后缀数组）</h3>
<ul>
  <li><strong>作用</strong>：记录模式串前缀与后缀的最长公共长度，匹配失败时跳过无效比较</li>
  <li>
    <p><strong>构建方法</strong>：
```cpp
vector<int> computeNext(const string&amp; pattern){
  	int m = pattern.size();
  	int i = 1, length = 0;
  	vector<int> next(m, 0);
		while(i &lt; m){
      	if(pattern[i] == pattern[length]){
          	length++;
          	next[i] = length;
          	i++;
        }else{
          	if(length != 0){
              	length = next[length-1];
            }else{
              	next[i] = 0;
              	i++;
            }</int></int></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    }
}
  	return next; }
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="3-使用kmp算法匹配计数">3. 使用KMP算法匹配计数</h3>

<ul>
  <li>
    <p>输入主串和模式匹配串，使用KMP算法进行字符串匹配，每一次模式串匹配之后，回退模式串指针进行下一次模式串与主串的匹配，注意字符串可部分重叠，也将计入匹配成功</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">int</span> <span class="nf">KMPcount</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">next</span><span class="p">){</span>
    	<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    	<span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    	<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    	<span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    	<span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">){</span>
        	<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]){</span>
            	<span class="n">i</span><span class="o">++</span><span class="p">;</span>
            	<span class="n">j</span><span class="o">++</span><span class="p">;</span>
            	<span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="n">m</span><span class="p">){</span>
                	<span class="n">count</span><span class="o">++</span><span class="p">;</span>
                	<span class="n">j</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
              <span class="p">}</span>
          <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            	<span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
                	<span class="n">i</span><span class="o">++</span><span class="p">;</span>
              <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                	<span class="n">j</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
              <span class="p">}</span>
          <span class="p">}</span>
      <span class="p">}</span>
    	<span class="k">return</span> <span class="n">count</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="代码实现-4">代码实现</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="n">string</span> <span class="n">S</span><span class="p">,</span><span class="n">P</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">;</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">computeLPS</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">pattern</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">next</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> 
    <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pattern</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">pattern</span><span class="p">[</span><span class="n">length</span><span class="p">]){</span>
            <span class="n">length</span><span class="o">++</span><span class="p">;</span>
            <span class="n">next</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">length</span><span class="p">;</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">length</span><span class="o">!=</span><span class="mi">0</span><span class="p">){</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="n">next</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">next</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">KMPcount</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">next</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">pattern</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pattern</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]){</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="n">j</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="n">m</span><span class="p">){</span>
                <span class="n">count</span><span class="o">++</span><span class="p">;</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">count</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">S</span> <span class="o">&gt;&gt;</span> <span class="n">n</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">P</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">next</span> <span class="o">=</span> <span class="n">computeLPS</span><span class="p">(</span><span class="n">P</span><span class="p">);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">KMPcount</span><span class="p">(</span><span class="n">next</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="ssubstri-psize-暴力求解版本"><code class="language-plaintext highlighter-rouge">s.substr(i, p.size())</code> 暴力求解版本：</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="n">string</span> <span class="n">s</span><span class="p">,</span><span class="n">p</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
  <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">s</span> <span class="o">&gt;&gt;</span> <span class="n">n</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">p</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="n">p</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">size</span><span class="p">())){</span>
        <span class="n">count</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="322-迭代器">3.2.2 迭代器</h2>

<p>迭代器是用来访问STL容器元素的指针</p>

<h3 id="定义">定义</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">::</span> <span class="n">iterator</span> <span class="n">it</span><span class="p">;</span>
<span class="n">set</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">::</span> <span class="n">iterator</span> <span class="n">it</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="使用实例">使用实例</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">44</span><span class="p">};</span>
    <span class="k">for</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">){</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">it</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">){</span>

    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">i</span> <span class="o">:</span> <span class="n">a</span><span class="p">){</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="323-容器">3.2.3 容器</h2>

<h3 id="1序列容器实现按顺序访问的数据结构">（1）序列容器:实现按顺序访问的数据结构</h3>

<ul>
  <li>array</li>
  <li>vector</li>
  <li>deque</li>
  <li>forward_list</li>
  <li>list</li>
  <li>stack</li>
  <li>queue</li>
  <li>priority_queue</li>
</ul>

<h3 id="2关联容器实现快速查找的有序数据结构">（2）关联容器：实现快速查找的有序数据结构</h3>

<ul>
  <li>set</li>
  <li>map</li>
</ul>

<h3 id="3无序关联容器实现快速查找无序的数据结构">（3）无序关联容器：实现快速查找无序的数据结构</h3>

<ul>
  <li>unordered_set</li>
  <li>Unordered_map</li>
</ul>

<h2 id="324-vector">3.2.4 vector</h2>

<ul>
  <li>
    <p>push_back()</p>
  </li>
  <li>
    <p>pop_back()</p>
  </li>
  <li>
    <p>Insert()</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// 插入单个元素</span>
  <span class="n">iterator</span> <span class="nf">insert</span><span class="p">(</span><span class="n">const_iterator</span> <span class="n">pos</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">);</span>
    
  <span class="c1">// 插入多个相同元素</span>
  <span class="n">iterator</span> <span class="nf">insert</span><span class="p">(</span><span class="n">const_iterator</span> <span class="n">pos</span><span class="p">,</span> <span class="n">size_type</span> <span class="n">count</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">);</span>
    
  <span class="c1">// 插入区间元素 [first, last)</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIt</span><span class="p">&gt;</span>
  <span class="n">iterator</span> <span class="nf">insert</span><span class="p">(</span><span class="n">const_iterator</span> <span class="n">pos</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">);</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
  <span class="n">v</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>       <span class="c1">// v = {1, 2, 3}</span>
  <span class="n">v</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>          <span class="c1">// v = {1, 2, 3, 4, 4}</span>
  <span class="n">list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">};</span>
  <span class="n">v</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">l</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">l</span><span class="p">.</span><span class="n">end</span><span class="p">());</span> <span class="c1">// v = {5, 6, 1, 2, 3, 4, 4}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Erase()</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// 删除单个元素</span>
  <span class="n">iterator</span> <span class="nf">erase</span><span class="p">(</span><span class="n">iterator</span> <span class="n">pos</span><span class="p">);</span>
    
  <span class="c1">// 删除区间 [first, last)</span>
  <span class="n">iterator</span> <span class="nf">erase</span><span class="p">(</span><span class="n">iterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">iterator</span> <span class="n">last</span><span class="p">);</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
  <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// v = {1, 3, 4}, it指向3</span>
  <span class="n">v</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>      <span class="c1">// 清空vector</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Clear()</p>
  </li>
  <li>
    <p>Begin()</p>
  </li>
  <li>
    <p>End()</p>
  </li>
  <li>
    <p>Size()</p>
  </li>
  <li>
    <p>resize()</p>
  </li>
  <li>
    <p>Front()</p>
  </li>
  <li>
    <p>Back()</p>
  </li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">;</span>
    <span class="n">a</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="c1">//遍历</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">a</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">){</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">it</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">){</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">it</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">i</span> <span class="o">:</span> <span class="n">a</span><span class="p">){</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="n">a</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">a</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="c1">//复制a到c</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">c</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">b</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="mi">3</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="325-算法函数概述">3.2.5 算法函数概述</h2>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">find(a.begin(), b.end(), value)</code> 顺序查找成功返回指向目标元素的迭代器，否则返回a.end()</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">reverse(a.begin(), a.end())</code>翻转字符串或者数组</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">sort(a.begin(), a.end(), cmp)</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">unique(first, last)</code> 要排序后使用 去除容器中相邻的重复元素</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">nth_element(a.begin(), a.begin()+mid, a.end(), cmp)</code> 用于查找第mid小的元素</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">binary_search(a.begin(), a.end(), value)</code>二分查找有序数组，返回true or false</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">lower_bound(a.begin(), a.end(), x)</code>二分查找返回第一个大于等于x的元素的迭代器，否则返回尾迭代器</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">upper_bound(a.begin(), a.end(), x)</code>二分查找返回第一个大于x的元素的迭代器， 否则返回尾迭代器</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">next_permutation(a.begin(), a.end())</code> 将当前排列改为下一个排列</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">prev_permutation(a.gebin(), a.end())</code></p>
  </li>
</ul>

<h2 id="p1571-眼红的medusastl-set-map的应用">P1571 眼红的Medusa（STL set map的应用）</h2>

<h3 id="题目描述-4">题目描述</h3>

<p>虽然 Miss Medusa 到了北京，领了科技创新奖，但是她还是觉得不满意。原因是：他发现很多人都和她一样获了科技创新奖，特别是其中的某些人，还获得了另一个奖项——特殊贡献奖。而越多的人获得了两个奖项，Miss Medusa就会越眼红。于是她决定统计有哪些人获得了两个奖项，来知道自己有多眼红。</p>

<h3 id="输入格式-4">输入格式</h3>

<p>第一行两个整数 $n, m$，表示有 $n$ 个人获得科技创新奖，$m$ 个人获得特殊贡献奖。</p>

<p>第二行 $n$ 个正整数，表示获得科技创新奖的人的编号。</p>

<p>第三行 $m$ 个正整数，表示获得特殊贡献奖的人的编号。</p>

<h3 id="输出格式-4">输出格式</h3>

<p>输出一行，为获得两个奖项的人的编号，按在科技创新奖获奖名单中的先后次序输出。</p>

<h4 id="输入输出样例-1">输入输出样例 #1</h4>

<h4 id="输入-1">输入 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4 3
2 15 6 8
8 9 2
</code></pre></div></div>

<h4 id="输出-1">输出 #1</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2 8
</code></pre></div></div>

<h4 id="说明提示">说明/提示</h4>

<p>对于 $60\%$ 的数据，$0 \leq n, m \leq 1000$，获得奖项的人的编号 $\lt 2 \times 10^9$；</p>

<p>对于 $100\%$ 的数据，$0 \leq n, m \leq 10^5$，获得奖项的人的编号 $\lt 2 \times 10^9$。</p>

<p>输入数据保证第二行任意两个数不同，第三行任意两个数不同。</p>

<h2 id="set">Set</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">(</span><span class="n">n</span><span class="p">);</span> <span class="c1">// 保存科技创新奖的顺序</span>
    <span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">s2</span><span class="p">;</span> <span class="c1">// 保存特殊贡献奖用于快速查找</span>

    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">num</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">num</span><span class="p">;</span>
        <span class="n">s2</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span> <span class="o">:</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s2</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">num</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="map">map</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">;</span>
<span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&gt;</span> <span class="n">record</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">100000</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">100000</span><span class="p">];</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">record</span><span class="p">[</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]]){</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="33-链表">3.3 链表</h1>

<h2 id="331-静态链表">3.3.1 静态链表</h2>

<h2 id="lanqiaooj-1110-小王子单链表手写单链表">lanqiaoOJ 1110 小王子单链表（手写单链表）</h2>

<h3 id="题目描述-5">题目描述</h3>

<p>小王子有一天迷上了排队的游戏，桌子上有标号为 1−10 的 10 个玩具，现在小王子将他们排成一列，可小王子还是太小了，他不确定他到底想把那个玩具摆在哪里，直到最后才能排成一条直线，求玩具的编号。已知他排了 <em>M</em> 次，每次都是选取标号为 X 个放到最前面，求每次排完后玩具的编号序列。</p>

<p>要求一：采用单链表解决</p>

<h3 id="输入描述">输入描述</h3>

<p>第一行是一个整数 M，表示小王子排玩具的次数。</p>

<p>随后 M<em>M</em> 行每行包含一个整数 X<em>，表示小王子要把编号为 X</em> 的玩具放在最前面。</p>

<h3 id="输出描述">输出描述</h3>

<p>共 M 行，第 <em>i</em> 行输出小王子第<em>i</em> 次排完序后玩具的编号序列。</p>

<h3 id="输入输出样例">输入输出样例</h3>

<h4 id="示例-1">示例 1</h4>

<blockquote>
  <p>输入</p>
</blockquote>

<pre><code class="language-txt">5
3
2
3
4
2
</code></pre>

<blockquote>
  <p>输出</p>
</blockquote>

<pre><code class="language-txt">3 1 2 4 5 6 7 8 9 10
2 3 1 4 5 6 7 8 9 10
3 2 1 4 5 6 7 8 9 10
4 3 2 1 5 6 7 8 9 10
2 4 3 1 5 6 7 8 9 10
</code></pre>

<h3 id="运行限制">运行限制</h3>

<ul>
  <li>最大运行时间：1s</li>
  <li>最大运行内存: 128M</li>
</ul>

<h3 id="解题思路-4">解题思路</h3>

<p>玩具初始排列为<code class="language-plaintext highlighter-rouge">1 2 3...8 9 10</code>,需要进行$M$ 次操作，其中每次操作将$X$ 玩具放到链表头。其中涉及到链表的插入与删除，关键在与如何找到目标节点的前驱节点。</p>

<p>（1）初始化链表</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">init</span><span class="p">(){</span>
  <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">data</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">node</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">data</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="n">node</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="c1">//表示空节点</span>
<span class="p">}</span>
</code></pre></div></div>

<p>（2）找到目标节点</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">pre</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">pre</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">data</span> <span class="o">!=</span> <span class="n">X</span><span class="p">){</span>
  <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
  <span class="n">cur</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span><span class="c1">//当cur节点不为空节点且cur节点不满足目标节点条件时向前移动节点</span>
</code></pre></div></div>

<p>（3）将目标节点插入至头部</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
  <span class="n">node</span><span class="p">[</span><span class="n">pre</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
  <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
  <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
<span class="p">}</span><span class="c1">//node[0]为头节点，不存储数据，为了方便链表操作而设置</span>
</code></pre></div></div>

<p>（4）打印结果</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">print</span><span class="p">(){</span>
	<span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">data</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="完整代码">完整代码</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="nc">nod</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">data</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">next</span><span class="p">;</span>
<span class="p">}</span> <span class="n">node</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>

<span class="kt">void</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">data</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">node</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">data</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">node</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// 末尾标记为-1</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">print</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">next</span><span class="p">;</span> <span class="c1">// 从头节点开始遍历</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 固定循环10次</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">init</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">M</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">M</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">M</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">X</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">X</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">pre</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">pre</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
        <span class="c1">// 查找目标节点的前驱</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">data</span> <span class="o">!=</span> <span class="n">X</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 找到目标节点</span>
            <span class="n">node</span><span class="p">[</span><span class="n">pre</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">next</span><span class="p">;</span> <span class="c1">// 前驱跳过当前节点</span>
            <span class="n">node</span><span class="p">[</span><span class="n">cur</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">next</span><span class="p">;</span> <span class="c1">// 当前节点指向原头节点</span>
            <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">next</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span> <span class="c1">// 头节点指向当前节点</span>
        <span class="p">}</span>
        <span class="n">print</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="lanqiaooj-3515-删除整数极简链表-优先队列">lanqiaoOJ 3515 删除整数（极简链表 优先队列）</h2>

<h3 id="问题描述-1">问题描述</h3>

<p>给定一个长度为 ( $N $) 的整数数列：($ A_1, A_2, \dots, A_N $)。你需要重复以下操作 ($ K $) 次：</p>

<p>每次选择数列中最小的整数（如果最小值不止一个，选择最靠前的），将其删除。并把与它相邻的整数加上被删除的数值。</p>

<p>输出 ( $K$) 次操作后的序列。</p>

<hr />

<h3 id="输入格式-5">输入格式</h3>

<p>第一行包含两个整数 ($ N $) 和 ($ K $)。</p>

<p>第二行包含 ( $N$) 个整数，( $A_1, A_2, A_3, \dots, A_N $)。</p>

<hr />

<h3 id="输出格式-5">输出格式</h3>

<p>输出 ( N - K ) 个整数，中间用一个空格隔开，代表 ( K ) 次操作后的序列。</p>

<hr />

<h3 id="样例输入-1">样例输入</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5 3
1 4 2 8 7
</code></pre></div></div>

<hr />

<h3 id="样例输出-1">样例输出</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>17 7
</code></pre></div></div>

<hr />

<h3 id="样例说明">样例说明</h3>

<hr />

<p>数列变化如下，中括号里的数是当次操作中被选择的数：</p>

<ol>
  <li>
    <p>初始数列：( [1], 4, 2, 8, 7 )<br />
删除 ( 1 )，并将相邻的 ( 4 ) 加上 ( 1 )，得到：( 5, 2, 8, 7 )。</p>
  </li>
  <li>
    <p>数列变为：( 5, [2], 8, 7 )<br />
删除 ( 2 )，并将相邻的 ( 5 ) 和 ( 8 ) 加上 ( 2 )，得到：( 7, 10, 7 )。</p>
  </li>
  <li>
    <p>数列变为：( [7], 10, 7 )<br />
删除 ( 7 )，并将相邻的 ( 10 ) 加上 ( 7 )，得到：( 17, 7 )。</p>
  </li>
</ol>

<p>最终数列为：( 17, 7 )。</p>

<h3 id="评测用例规模与约定">评测用例规模与约定</h3>

<hr />

<ul>
  <li>对于 ( $20\%$ ) 的数据，( $1 \leq K &lt; N \leq 10000 $)。</li>
  <li>对于 ( 100\% ) 的数据，( $1 \leq K &lt; N \leq 5 \times 10^5$)，且 ($ 0 \leq A_i \leq 10^8$ )。</li>
</ul>

<h3 id="解题思路-5">解题思路</h3>

<hr />

<ol>
  <li>常见的解题思路为遍历链表找出最小的元素，再对相邻元素进行删除相加操作（使用链表数据结构），那么时间复杂度将会变为$O(NK)$ ， 考虑到题目的数据范围，时间复杂度最高会达到$25 \times 10^{10}$ ，将不能通过所有测试数据。</li>
  <li>考虑使用优先队列数据结构找出最小的元素，这样查找时间复杂度为$O(logN)$，但是常规链表找到目标元素时间复杂度为$O(N)$,在K次操作下，总的时间复杂度将会变为$O(KNlogN)$，但是耗时一样，等于优先队列白用。</li>
  <li>为此若使用极简链表<code class="language-plaintext highlighter-rouge">R[N]</code>，其中<code class="language-plaintext highlighter-rouge">i</code> 表示节点数据，<code class="language-plaintext highlighter-rouge">R[i]</code>表示右节点的指针，将查找目标元素的时间复杂度降为$O(1)$ ，总时间复杂度降为$O(Klog N)$ 。</li>
</ol>

<h3 id="代码实现-5">代码实现</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mf">5e5</span> <span class="o">+</span> <span class="mi">10</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">k</span><span class="p">;</span>
<span class="c1">//删除最小元素节点，相邻节点加上最小元素</span>

<span class="kt">long</span> <span class="kt">long</span> <span class="n">v</span><span class="p">[</span><span class="n">N</span><span class="p">];</span><span class="c1">//存储输入数据,v[i]最大为10^8,相加可能大于10^9，存储数据类型用long long</span>
<span class="kt">int</span> <span class="n">L</span><span class="p">[</span><span class="n">N</span><span class="p">],</span> <span class="n">R</span><span class="p">[</span><span class="n">N</span><span class="p">];</span><span class="c1">//存储数据的左右元素下标，作为双链表的左右节点指针</span>
<span class="kt">void</span> <span class="nf">del</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span>  <span class="c1">//传入的参数是目标元素的下标x</span>
  <span class="n">R</span><span class="p">[</span> <span class="n">L</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="n">x</span><span class="p">];</span>
  <span class="n">L</span><span class="p">[</span> <span class="n">R</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="n">L</span><span class="p">[</span><span class="n">x</span><span class="p">];</span><span class="c1">//删除元素x</span>
  <span class="n">v</span><span class="p">[</span><span class="n">R</span><span class="p">[</span><span class="n">x</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">v</span><span class="p">[</span><span class="n">x</span><span class="p">];</span>
  <span class="n">v</span><span class="p">[</span><span class="n">L</span><span class="p">[</span><span class="n">x</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">v</span><span class="p">[</span><span class="n">x</span><span class="p">];</span><span class="c1">//更新左右节点的元素</span>
<span class="p">}</span>
<span class="c1">//打印输出结果</span>
<span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="n">priority_queue</span> <span class="o">&lt;</span><span class="n">pair</span> <span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">vector</span> <span class="o">&lt;</span><span class="n">pair</span> <span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">,</span> <span class="n">greater</span> <span class="o">&lt;</span><span class="n">pair</span> <span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;&gt;&amp;</span> <span class="n">Q</span><span class="p">){</span>
  <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="k">while</span><span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">){</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span><span class="p">[</span><span class="n">cur</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="n">cur</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">k</span><span class="p">;</span>
  <span class="n">priority_queue</span> <span class="o">&lt;</span><span class="n">pair</span> <span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">vector</span> <span class="o">&lt;</span><span class="n">pair</span> <span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">,</span> <span class="n">greater</span> <span class="o">&lt;</span><span class="n">pair</span> <span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;&gt;</span> <span class="n">Q</span><span class="p">;</span>
  <span class="c1">//使用pair存储元素，first存储元素数值，second存储元素的下标，存储下标便于链表的查询操作</span>
  <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">L</span><span class="p">[</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">L</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">Q</span><span class="p">.</span><span class="n">push</span><span class="p">({</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span><span class="p">});</span><span class="c1">//将输入数据存入优先队列</span>
  <span class="p">}</span>
  <span class="c1">//进行 k 次 del 操作</span>
  <span class="k">while</span><span class="p">(</span><span class="n">k</span><span class="o">--</span><span class="p">){</span>
    <span class="n">pair</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Q</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
    <span class="n">Q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">]</span> <span class="o">!=</span> <span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">){</span>
      <span class="n">k</span><span class="o">++</span><span class="p">;</span>
      <span class="n">Q</span><span class="p">.</span><span class="n">push</span><span class="p">({</span><span class="n">v</span><span class="p">[</span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">],</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">});</span>
    <span class="p">}</span><span class="c1">//若队头被del()改过了，但是优先队列Q还没有更新，则此时的对头p不一定是最小值，需要更新队列Q，并撤销这次操作（k++）</span>
    <span class="k">else</span><span class="p">{</span>
      <span class="n">del</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">print</span><span class="p">(</span><span class="n">Q</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="332-stl-list">3.3.2 STL list</h2>

<p>size() empty() push_front() push_back() unique() sort() pop_back() pop_front() front() back() reverse() insert() erase()</p>

<h2 id="lanqiaooj-3255-重新排队stl-链表基本方法">lanqiaoOJ 3255 重新排队（STL 链表基本方法）</h2>

<h3 id="问题描述-2">问题描述</h3>

<p>给定按从小到大的顺序排列的数字 1 到 <em>n</em>，随后对它们进行 <em>m</em> 次操作，每次将一个数字 <em>x</em> 移动到数字 <em>y</em> 之前或之后。请输出完成这 <em>m</em> 次操作后它们的顺序。</p>

<h3 id="输入格式-6">输入格式</h3>

<p>第一行为两个数字 n,m，表示初始状态为1 到 <em>n</em> 的从小到大排列，后续有 <em>m</em> 次操作。</p>

<p>第二行到第 <em>m</em>+1 行，每行三个数 <em>x</em>,<em>y</em>,<em>z</em>。当 <em>z</em>=0 时，将 <em>x</em> 移动到 <em>y</em> 之后；当 <em>z</em>=1 时，将x移动到 <em>y</em> 之前。</p>

<h3 id="输出格式-6">输出格式</h3>

<p>一行，<em>n</em> 个数字，中间用空格隔开，表示 <em>m</em> 次操作完成后的排列顺序。</p>

<h3 id="样例输入-2">样例输入</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5 3
3 1 0
5 2 1
2 1 1
</code></pre></div></div>

<h3 id="样例输出-2">样例输出</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2 1 3 5 4
</code></pre></div></div>

<h3 id="说明提示-1">说明/提示</h3>

<p>$n \le 10^4$ , $m \le 10^4$</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">// 请在此输入您的代码</span>
  <span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">;</span>
  <span class="n">list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">L</span><span class="p">;</span>
  <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">L</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="o">--</span><span class="p">){</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">y</span> <span class="o">&gt;&gt;</span> <span class="n">z</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">z</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
      <span class="c1">//x移动到y之后</span>
      <span class="n">L</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
      <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">L</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">L</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">y</span><span class="p">);</span>
      <span class="o">++</span><span class="n">it</span><span class="p">;</span>
      <span class="n">L</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="n">L</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
      <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">L</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">L</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">y</span><span class="p">);</span>
      <span class="n">it</span><span class="p">;</span>
      <span class="n">L</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">i</span> <span class="o">:</span> <span class="n">L</span><span class="p">){</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="34-队列">3.4 队列</h1>

<p>队列是一种先入先出的数据结构</p>

<h2 id="341-使用数组手写队列">3.4.1 使用数组手写队列</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="kt">int</span> <span class="n">N</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">queue</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="c1">//队列初始化，设置头尾指针</span>
<span class="kt">int</span> <span class="n">head</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">tail</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> 

<span class="kt">void</span> <span class="nf">push</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span>
	<span class="n">queue</span><span class="p">[</span><span class="o">++</span><span class="n">tail</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">pop</span><span class="p">(){</span>
  <span class="n">head</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">top</span><span class="p">(){</span>
	<span class="k">return</span> <span class="n">queue</span><span class="p">[</span><span class="n">head</span><span class="p">];</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">size</span><span class="p">(){</span>
	<span class="k">return</span> <span class="n">tail</span> <span class="o">-</span> <span class="n">head</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="p1996-约瑟夫问题循环队列">P1996 约瑟夫问题(循环队列)</h2>

<h3 id="题目描述-6">题目描述</h3>

<p>$n$ 个人围成一圈，从第一个人开始报数,数到 $m$ 的人出列，再由下一个人重新从 $1$ 开始报数，数到 $m$ 的人再出圈，依次类推，直到所有的人都出圈，请输出依次出圈人的编号。</p>

<p><strong>注意：本题和《深入浅出-基础篇》上例题的表述稍有不同。书上表述是给出淘汰 $n-1$ 名小朋友，而该题是全部出圈。</strong></p>

<h3 id="输入格式-7">输入格式</h3>

<p>输入两个整数 $n,m$。</p>

<h3 id="输出格式-7">输出格式</h3>

<p>输出一行 $n$ 个整数，按顺序输出每个出圈人的编号。</p>

<h3 id="输入输出样例-1-1">输入输出样例 #1</h3>

<h3 id="输入-1-1">输入 #1</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10 3
</code></pre></div></div>

<h3 id="输出-1-1">输出 #1</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3 6 9 2 7 1 8 5 10 4
</code></pre></div></div>

<h3 id="说明提示-2">说明/提示</h3>

<p>$1 \le m, n \le 100$</p>

<h4 id="解题思路-6">解题思路</h4>

<hr />

<h4 id="1-队列具有先进先出的性质约瑟夫问题中涉及循环报数的问题在出队列的同时进入队列即可解决循环问题">1. 队列具有先进先出的性质，约瑟夫问题中涉及循环报数的问题，在出队列的同时进入队列即可解决循环问题</h4>

<h4 id="2-从1开始计数到m时将对应元素移除并打印结果">2. 从1开始计数，到m时将对应元素移除并打印结果</h4>

<h3 id="关键代码">关键代码</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span><span class="p">(</span><span class="n">myq</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="n">myq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">myq</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
    <span class="n">myq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="c1">//第m个数出队 不再入队</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">myq</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
  <span class="n">myq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="完整代码-1">完整代码</h4>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">10005</span><span class="p">;</span>
<span class="k">struct</span> <span class="nc">Queue</span><span class="p">{</span>
    <span class="kt">int</span> <span class="n">queue</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">head</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">tail</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="kt">void</span> <span class="n">push</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span><span class="n">queue</span><span class="p">[</span><span class="o">++</span><span class="n">tail</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;}</span>
    <span class="kt">void</span> <span class="nf">pop</span><span class="p">(){</span><span class="n">head</span><span class="o">++</span><span class="p">;}</span>
    <span class="kt">int</span> <span class="nf">top</span><span class="p">(){</span><span class="k">return</span> <span class="n">queue</span><span class="p">[</span><span class="n">head</span><span class="p">];}</span>
    <span class="kt">int</span> <span class="nf">size</span><span class="p">(){</span><span class="k">return</span> <span class="n">tail</span> <span class="o">-</span> <span class="n">head</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;}</span>
<span class="p">};</span>
<span class="n">Queue</span> <span class="n">myq</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">myq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span><span class="n">myq</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="n">myq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">myq</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
            <span class="n">myq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">myq</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
        <span class="n">myq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="342-stl-queue">3.4.2 STL queue</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>queue&lt;Type&gt; q; q.push(); q.front(); q.pop(); q.back(); q.size(); q.empty() 
</code></pre></div></div>

<h3 id="p1996-约瑟夫问题stl-queue">P1996 约瑟夫问题（STL queue）</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
    <span class="n">queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">q</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">());</span>
            <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
        <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="lanqiaooj-511-机器翻译">lanqiaoOJ 511 机器翻译</h3>

<h3 id="题目描述-7">题目描述</h3>

<p>小晨的电脑上安装了一个机器翻译软件，他经常用这个软件来翻译英语文章。</p>

<p>这个翻译软件的原理很简单，它只是从头到尾，依次将每个英文单词用对应的中文含义来替换。对于每个英文单词，软件会先在内存中查找这个单词的中文含义，如果内存中有，软件就会用它进行翻译；如果内存中没有，软件就会在外存中的词典内查找，查出单词的中文含义然后翻译，并将这个单词和译义放入内存，以备后续的查找和翻译。</p>

<p>假设内存中有 M个单元，每单元能存放一个单词和译义。每当软件将一个新单词存入内存前，如果当前内存中已存入的单词数不超过 M−1，软件会将新单词存入一个未使用的内存单元；若内存中已存入 M个单词，软件会清空最早进入内存的那个单词，腾出单元来，存放新单词。</p>

<p>假设一篇英语文章的长度为 N个单词。给定这篇待译文章，翻译软件需要去外存查找多少次词典？假设在翻译开始前，内存中没有任何单词。</p>

<h3 id="输入描述-1">输入描述</h3>

<p>输入共 2 行。每行中两个数之间用一个空格隔开。</p>

<p>第一行为两个正整数 M 和 N，代表内存容量和文章的长度。</p>

<p>第二行为 N个非负整数，按照文章的顺序，每个数（大小不超过 1000）代表一个英文单词。文章中两个单词是同一个单词，当且仅当它们对应的非负整数相同。</p>

<p>其中，$0&lt;M\le100，0&lt;N\le10000$。</p>

<h3 id="输出描述-1">输出描述</h3>

<p>输出共 1 行，包含一个整数，为软件需要查词典的次数。</p>

<h3 id="输入输出样例-1">输入输出样例</h3>

<h4 id="示例-1-1">示例 1</h4>

<blockquote>
  <p>输入</p>
</blockquote>

<pre><code class="language-txt">3 7
1 2 1 5 4 4 1
</code></pre>

<blockquote>
  <p>输出</p>
</blockquote>

<pre><code class="language-txt">5
</code></pre>

<h4 id="示例-2">示例 2</h4>

<blockquote>
  <p>输入</p>
</blockquote>

<pre><code class="language-txt">2 10
8 824 11 78 11 78 11 78 8 264 
</code></pre>

<blockquote>
  <p>输出</p>
</blockquote>

<pre><code class="language-txt">6
</code></pre>

<h3 id="解题思路-7">解题思路</h3>

<ol>
  <li>内存存储机制为<code class="language-plaintext highlighter-rouge">FIFO</code>，同时队列存储机制也是<code class="language-plaintext highlighter-rouge">FIFO</code>，因此使用队列存储内存数据</li>
  <li>题中涉及到单词匹配问题，用数字模拟单词，那么可以使用<code class="language-plaintext highlighter-rouge">unordered_map</code>查找匹配单词</li>
  <li>将每次输入的单词word与内存中的单词匹配
    <ul>
      <li>若匹配成功，则不做任何操作</li>
      <li>若匹配失败，则去外存查找字典，并将新单词存入内存，按照队列FIFO的机制更新相应的数据</li>
    </ul>
  </li>
</ol>

<h3 id="完整代码-2">完整代码</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">M</span><span class="p">,</span> <span class="n">N</span><span class="p">;</span>
  <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">M</span> <span class="o">&gt;&gt;</span> <span class="n">N</span><span class="p">;</span>
  <span class="n">queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">q</span><span class="p">;</span>
  <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&gt;</span> <span class="n">record</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">word</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">word</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="n">word</span><span class="p">]){</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="n">ans</span><span class="o">++</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">M</span><span class="p">){</span>
        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">record</span><span class="p">[</span><span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">()]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="n">record</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// 请在此输入您的代码</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ans</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="35-优先队列">3.5 优先队列</h1>

<p>普通队列遵循FIFO的原则，不支持中间插队或者出队，而优先队列在普通队列的基础上增加了优先级这个特征，队首元素永远是优先级最高的元素，当入队或出队时，内部会自动调整结构<strong>（使用的是二叉堆数据结构）</strong>，总会保持队首元素优先级最大。</p>

<pre><code class="language- cpp">priority_queue&lt;Type, Container, Functional&gt; pq;//默认大顶堆
pq.push(); pq.pop(); pq.size(); pq.top(); pq.empty();
</code></pre>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">priority_queue</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">pq</span><span class="p">;</span>
<span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">string</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s">"beijing"</span><span class="p">),</span><span class="n">b</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="s">"shanghai"</span><span class="p">),</span><span class="n">c</span><span class="p">(</span><span class="mi">27</span><span class="p">,</span> <span class="s">"wuhan"</span><span class="p">);</span>
<span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">b</span><span class="p">);</span> <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="newoj-1721-丑数">newOJ 1721 丑数</h2>

<p>给定素数集合$S={ p_1,p_2,…,p_k }$，而丑数是指一个正整数满足所有质因数都出现在S中，1默认是第1个丑数。例如$S={2,3,5}$时，此时前20个丑数：1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36,现在$S={3,7,17,29,53}$，求第20220个丑数是多少？</p>

<h3 id="解题思路-8">解题思路</h3>

<ol>
  <li>$S={p_1, p_2, … , p_k}$集合存入数组prime[ ]，创建集合S存放丑数<strong>去重</strong>，创建优先队列，令队首元素最小</li>
  <li>求第20220个丑数也就是求第20220小的丑数，从队首依次取出元素直到第20220次为止即可</li>
  <li>在每次取出最小丑数的同时，更新丑数，将去重后的丑数重新放入优先队列</li>
</ol>

<h3 id="完整代码-3">完整代码</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ll</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">prime</span><span class="p">[</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">53</span><span class="p">};</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
  <span class="n">set</span><span class="o">&lt;</span><span class="n">ll</span><span class="o">&gt;</span> <span class="n">s</span><span class="p">;</span>
  <span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="n">priority_queue</span><span class="o">&lt;</span><span class="n">ll</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">ll</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">greater</span><span class="o">&lt;</span><span class="n">ll</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">pq</span><span class="p">;</span>
  <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="n">ll</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">20220</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">ll</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
    <span class="n">ans</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
    <span class="n">pq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">20220</span><span class="p">){</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
      <span class="n">ll</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">*</span> <span class="n">prime</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">s</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">temp</span><span class="p">)){</span>
        <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
        <span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ans</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="newoj-1788-分牌">newOJ 1788 分牌</h2>

<h4 id="题目描述-8">题目描述</h4>

<p>现在有n张牌，每张牌上有一个数字a[i]，现在需要将这n张牌尽可能分给更多的人：
每个人需要被分到k张牌，同时每个人被分到手的牌中不能有相同数字。
你需要保证可以尽可能的多分给更多的人，然后输出任意的一种分法即可。</p>

<h4 id="输入格式-8">输入格式</h4>

<p>输入第一行为正整数n和k。(1≤k≤n≤1000000)
第二行包含n个整数a[i]。(1≤a[i]≤1000000)</p>

<h4 id="输出格式-8">输出格式</h4>

<p>输出m行，m为可以分给的人数，数据保证m大于等于1。
第i行输出第i个人手中牌的数字。
输出任意一解即可。</p>

<h4 id="输入样例">输入样例</h4>

<pre><code class="language-plain">样例1
6 3
1 2 1 2 3 4

样例2
14 3
3 4 1 1 1 2 3 1 2 1 1 5 6 7
</code></pre>

<h4 id="输出样例">输出样例</h4>

<pre><code class="language-plain">样例1：
1 2 4
1 2 3

样例2：
6 1 3
2 4 1
5 1 2
1 3 7
</code></pre>

<h3 id="解题思路-9">解题思路</h3>

<ol>
  <li>将 n 张牌发给m（未知）个人，每个人可以分到 k 张牌，且每个人的牌不可以有重复。</li>
  <li>采用隔板法，统计每一种牌的数量降序排列，每次发牌优先发数量较多的牌。</li>
  <li>当牌种类数小于k时停止。</li>
</ol>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mf">1e6</span> <span class="o">+</span> <span class="mi">10</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">num</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
  <span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">;</span>
  <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">num</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">priority_queue</span><span class="o">&lt;</span> <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">pq</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    	<span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">({</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span><span class="p">});</span>
  <span class="p">}</span>
  <span class="k">while</span><span class="p">(</span><span class="n">pq</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">k</span><span class="p">){</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">ans</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">k</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
      <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
    	<span class="n">pq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
      <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">k</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
      <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first</span><span class="o">--</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
        <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="36-栈">3.6 栈</h1>

<h4 id="题目描述-9">题目描述</h4>

<p>给你一个1-n的排列，每个&lt;i,j&gt;对的价值是j-i+1，计算所有满足以下条件&lt;i,j&gt;对的总价值：</p>

<ul>
  <li>1≤i&lt;j≤n</li>
  <li>a[i]-a[j]之间的数字均小于min(a[i],a[j])</li>
  <li>a[i]-a[j]之间不存在其他数字则直接满足</li>
</ul>

<h4 id="输入格式-9">输入格式</h4>

<p>输入第一行包含正整数N(N≤300000)
第二行包含N个正整数，表示一个1-N的排列a</p>

<h4 id="输出格式-9">输出格式</h4>

<p>输出一个正整数表示答案。</p>

<h4 id="输入样例-复制">输入样例 复制</h4>

<pre><code class="language-plain">7
4 3 1 2 5 6 7
</code></pre>

<h4 id="输出样例-复制">输出样例 复制</h4>

<pre><code class="language-plain">24
</code></pre>

<h2 id="解题思路-10">解题思路</h2>

<ol>
  <li><strong>单调栈寻找边界</strong>：
    <ul>
      <li>使用单调递减栈维护元素索引，当处理到元素<code class="language-plaintext highlighter-rouge">i</code>时，弹出栈中所有比<code class="language-plaintext highlighter-rouge">a[i]</code>小的元素。此时，栈顶元素<code class="language-plaintext highlighter-rouge">last</code>是<code class="language-plaintext highlighter-rouge">i</code>左边第一个比<code class="language-plaintext highlighter-rouge">a[i]</code>大的元素。</li>
      <li>这样，<code class="language-plaintext highlighter-rouge">last</code>和<code class="language-plaintext highlighter-rouge">i</code>之间形成一个区间，其中所有元素都小于<code class="language-plaintext highlighter-rouge">min(a[last], a[i])</code>，满足题目条件。</li>
    </ul>
  </li>
  <li><strong>统计非相邻对</strong>：
    <ul>
      <li>对于每个被弹出的元素<code class="language-plaintext highlighter-rouge">top</code>，若栈不为空，则计算当前<code class="language-plaintext highlighter-rouge">i</code>与栈顶<code class="language-plaintext highlighter-rouge">last</code>的距离<code class="language-plaintext highlighter-rouge">i - last + 1</code>，并累加到答案中。这代表以<code class="language-plaintext highlighter-rouge">last</code>为左端点、<code class="language-plaintext highlighter-rouge">i</code>为右端点的对的价值。</li>
      <li>例如，若<code class="language-plaintext highlighter-rouge">a[last]</code>和<code class="language-plaintext highlighter-rouge">a[i]</code>是区间内的最大值，它们之间的所有元素都满足条件，因此这对的价值为<code class="language-plaintext highlighter-rouge">i - last + 1</code>。</li>
    </ul>
  </li>
  <li><strong>处理相邻对</strong>：
    <ul>
      <li>相邻对（<code class="language-plaintext highlighter-rouge">j = i+1</code>）的中间没有元素，直接满足条件。总共有<code class="language-plaintext highlighter-rouge">n-1</code>个这样的对，每个价值为<code class="language-plaintext highlighter-rouge">2</code>，总和为<code class="language-plaintext highlighter-rouge">2*(n-1)</code>，在代码末尾直接累加。</li>
    </ul>
  </li>
</ol>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">300007</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">st</span><span class="p">;</span>
    <span class="kt">long</span> <span class="kt">long</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">[</span><span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">()]</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]){</span>
            <span class="n">st</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
                <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
                <span class="n">ans</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">last</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">st</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">ans</span> <span class="o">+=</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ans</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="37-二叉树">3.7 二叉树</h1>

<h3 id="1-子树的大小问题描述">1. 子树的大小问题描述</h3>

<p>给定一棵包含 <em>n</em> 个结点的完全 m* 叉树，结点按从根到叶、从左到右的顺序依次编号。例如下图是一个拥有 11 个结点的完全 3 叉树。</p>

<p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1331660-20230707-1688695598840" alt="图片描述" /></p>

<p>你需要求出第 k个结点对应的子树拥有的结点数量。</p>

<h3 id="输入格式-10">输入格式</h3>

<p>输入包含多组询问。</p>

<p>输入的第一行包含一个整数 <em>T</em>，表示询问次数。</p>

<p>接下来<em>T</em> 行，每行包含三个整数 n<em>，</em>m<em>，k</em>，表示一组询问。</p>

<h3 id="输出格式-10">输出格式</h3>

<p>输出 <em>T</em> 行，每行包含一个整数表示对应询问的答案。</p>

<h3 id="样例输入-3">样例输入</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3
1 2 1
11 3 4
74 5 3
</code></pre></div></div>

<h3 id="样例输出-3">样例输出</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
2
24
</code></pre></div></div>

<h3 id="评测用例规模与约定-1">评测用例规模与约定</h3>

<p>对于 4040 的评测用例，T≤50<em>T</em>≤50，n≤106<em>n</em>≤106，m≤16<em>m</em>≤16；</p>

<p>对于所有评测用例，1≤T≤1051≤<em>T</em>≤105，1≤k≤n≤1091≤<em>k</em>≤<em>n</em>≤109，2≤m≤1092≤<em>m</em>≤109</p>

<h2 id="解题思路-11">解题思路</h2>

<ul>
  <li>对于有n个顶点的m叉树，要计算第k个节点的子树总结点，采用dfs深度遍历每个节点计算</li>
  <li>lson = (k-1) * m + 2     rson = k * m + 1</li>
  <li>初始化节点数为ans = 1，对于递归便利求解，关键在于出口</li>
  <li>计算节点数分为三种情况分析</li>
  <li>
    <ul>
      <li>如果lson &gt; n ，则说明节点k无左右孩子，最终return节点数为1
        <ul>
          <li>如果rson &gt; n，则说明有孩子节点但是没有达到满孩子m，最终return节点数为 n - lson + 1</li>
          <li>否则节点都是满孩子状态，就循环便利from lson to rson ，ans += dfs（n,m,c）;return ans;</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="完整代码dfs版">完整代码DFS版</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ll</span><span class="p">;</span>
<span class="n">ll</span> <span class="nf">count_k</span><span class="p">(</span><span class="n">ll</span> <span class="n">n</span><span class="p">,</span> <span class="n">ll</span> <span class="n">m</span><span class="p">,</span> <span class="n">ll</span> <span class="n">k</span><span class="p">){</span>
  <span class="n">ll</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">m</span> <span class="o">-</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span><span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">-</span> <span class="n">k</span><span class="o">*</span><span class="n">m</span> <span class="o">+</span> <span class="n">m</span> <span class="p">;</span>
  <span class="p">}</span><span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="n">ll</span> <span class="n">c</span> <span class="o">=</span> <span class="n">k</span><span class="o">*</span><span class="n">m</span> <span class="o">-</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="o">*</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">){</span>
      <span class="n">ans</span> <span class="o">+=</span> <span class="n">count_k</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">// 请在此输入您的代码</span>
  <span class="kt">int</span> <span class="n">t</span><span class="p">;</span>
  <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">t</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">){</span>
    <span class="n">ll</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">k</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span><span class="n">n</span><span class="o">&gt;&gt;</span><span class="n">m</span><span class="o">&gt;&gt;</span><span class="n">k</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">count_k</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span> 
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="解题思路模拟版">解题思路（模拟版）</h2>

<ul>
  <li>
    <p>对于第k个节点，可以依次计算子树每层的节点</p>
  </li>
  <li>
    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>              <span class="n">lson</span> <span class="o">=</span> <span class="p">(</span><span class="n">lson</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">m</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
              <span class="n">rson</span> <span class="o">=</span> <span class="n">rson</span><span class="o">*</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="n">lson</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span><span class="k">break</span><span class="p">;</span>
              <span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">rson</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">){</span>
                  <span class="n">ans</span> <span class="o">+=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">lson</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                  <span class="k">break</span><span class="p">;</span>
              <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                  <span class="n">ans</span> <span class="o">+=</span> <span class="n">rson</span> <span class="o">-</span> <span class="n">lson</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
              <span class="p">}</span>
</code></pre></div>    </div>

    <p>## 完整代码</p>
  </li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ll</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">t</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">t</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">){</span>
        <span class="n">ll</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">k</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span> <span class="o">&gt;&gt;</span> <span class="n">k</span><span class="p">;</span>
        <span class="n">ll</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">ll</span> <span class="n">lson</span> <span class="o">=</span> <span class="n">k</span><span class="p">;</span>
        <span class="n">ll</span> <span class="n">rson</span> <span class="o">=</span> <span class="n">k</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
            <span class="n">lson</span> <span class="o">=</span> <span class="p">(</span><span class="n">lson</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">m</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
            <span class="n">rson</span> <span class="o">=</span> <span class="n">rson</span><span class="o">*</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">lson</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span><span class="k">break</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">rson</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">){</span>
                <span class="n">ans</span> <span class="o">+=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">lson</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="n">ans</span> <span class="o">+=</span> <span class="n">rson</span> <span class="o">-</span> <span class="n">lson</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ans</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="2-fbi题目描述">2. FBI题目描述</h3>

<p>我们可以把由 “0” 和 “1” 组成的字符串分为三类：全 “0” 串称为 B 串，全 “1” 串称为 I 串，既含 “0” 又含 “1” 的串则称为 F 串。</p>

<p>FBI树是一种二叉树，它的结点类型也包括 F 结点，B 结点和 I 结点三种。由一个长度为 2<em>N</em> 的 “01” 串 S 可以构造出一棵 FBI 树 T，递归的构造方法如下：</p>

<ol>
  <li>T 的根结点为 R，其类型与串 S 的类型相同；</li>
  <li>若串 S 的长度大于 1，将串 S 从中间分开，分为等长的左右子串 S1 和 S2 ；由左子串 S1 构造 R 的左子树 T1，由右子串 S2 构造 R 的右子树 T2。</li>
</ol>

<p>现在给定一个长度为 2<em>N</em> 的 “01” 串，请用上述构造方法构造出一棵FBI树，并输出它的后序遍历序列。</p>

<h3 id="输入描述-2">输入描述</h3>

<p>第一行是一个整数 N<em>（0≤</em>N*≤10）。</p>

<p>第二行是一个长度为 2<em>N</em> 的 “01” 串。</p>

<h3 id="输出描述-2">输出描述</h3>

<p>输出一个字符串，即 FBI 树的后序遍历序列。</p>

<h3 id="输入输出样例-2">输入输出样例</h3>

<h4 id="示例-1-2">示例 1</h4>

<blockquote>
  <p>输入</p>
</blockquote>

<pre><code class="language-txt">3
10001011
</code></pre>

<blockquote>
  <p>输出</p>
</blockquote>

<pre><code class="language-txt">IBFBBBFIBFIIIFF
</code></pre>

<h3 id="运行限制-1">运行限制</h3>

<ul>
  <li>最大运行时间：1s</li>
  <li>最大运行内存: 128M</li>
</ul>

<h2 id="解题思路-12">解题思路</h2>

<ul>
  <li>
    <p>对于FBI构成规则进行理解，一个字符串为一个类型，然后对半分解字符串为左右子字符串，形成二叉树</p>
  </li>
  <li>
    <p>使用char tree[N]进行类别保存</p>
  </li>
  <li>
    <p>对于于一个字符串s，如何进行类型判别，是全0？全1？还是都有0和1？</p>
  </li>
  <li>
    <ul>
      <li>一个很长的字符串如’10001011’很难直接判断
        <ul>
          <li>但是两两拆分，直到只剩1个或2个元素的时候就很容易进行判别</li>
          <li>于是我们可以逆向求解，由子问题合并求解原问题</li>
          <li>可以发现递归思想很好的符合我们拆分问题为子问题再由子问题逆向求解的过程</li>
          <li>递归关键是找出出口函数，显然出口函数就是到叶子节点的时候</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">==</span> <span class="n">right</span><span class="p">){</span>
          <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'1'</span><span class="p">)</span><span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'I'</span><span class="p">;</span>
          <span class="k">else</span><span class="p">{</span><span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'B'</span><span class="p">;}</span>
          <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="完整代码-4">完整代码</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">tree</span><span class="p">[</span><span class="mi">4400</span><span class="p">];</span>
<span class="kt">char</span> <span class="n">s</span><span class="p">[</span><span class="mi">1100</span><span class="p">];</span>
<span class="kt">void</span> <span class="nf">build_FBI</span><span class="p">(</span><span class="kt">int</span> <span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span> <span class="n">right</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">==</span> <span class="n">right</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'1'</span><span class="p">)</span><span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'I'</span><span class="p">;</span>
        <span class="k">else</span><span class="p">{</span><span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'B'</span><span class="p">;}</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">left</span> <span class="o">+</span> <span class="n">right</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">lson</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">root</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rson</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">root</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">build_FBI</span><span class="p">(</span><span class="n">lson</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">mid</span><span class="p">);</span>
    <span class="n">build_FBI</span><span class="p">(</span><span class="n">rson</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">tree</span><span class="p">[</span><span class="n">lson</span><span class="p">]</span><span class="o">==</span><span class="sc">'I'</span><span class="o">&amp;&amp;</span> <span class="n">tree</span><span class="p">[</span><span class="n">rson</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'I'</span><span class="p">){</span>
        <span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'I'</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">tree</span><span class="p">[</span><span class="n">lson</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'B'</span> <span class="o">&amp;&amp;</span> <span class="n">tree</span><span class="p">[</span><span class="n">rson</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'B'</span><span class="p">){</span>
        <span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'B'</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'F'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span> 
<span class="kt">void</span> <span class="nf">postorder</span><span class="p">(</span><span class="kt">int</span> <span class="n">root</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'\0'</span><span class="p">){</span>
        <span class="n">postorder</span><span class="p">(</span><span class="n">root</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">postorder</span><span class="p">(</span><span class="n">root</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">build_FBI</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
    <span class="n">postorder</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="38-并查集">3.8 并查集</h1>

<h2 id="p1551-亲戚">P1551 亲戚</h2>

<h2 id="题目背景-1">题目背景</h2>

<p>若某个家族人员过于庞大，要判断两个是否是亲戚，确实还很不容易，现在给出某个亲戚关系图，求任意给出的两个人是否具有亲戚关系。</p>

<h2 id="题目描述-10">题目描述</h2>

<p>规定：$x$ 和 $y$ 是亲戚，$y$ 和 $z$ 是亲戚，那么 $x$ 和 $z$ 也是亲戚。如果 $x$，$y$ 是亲戚，那么 $x$ 的亲戚都是 $y$ 的亲戚，$y$ 的亲戚也都是 $x$ 的亲戚。</p>

<h2 id="输入格式-11">输入格式</h2>

<p>第一行：三个整数 $n,m,p$，（$n,m,p \le 5000$），分别表示有 $n$ 个人，$m$ 个亲戚关系，询问 $p$ 对亲戚关系。</p>

<p>以下 $m$ 行：每行两个数 $M_i$，$M_j$，$1 \le M_i,~M_j\le n$，表示 $M_i$ 和 $M_j$ 具有亲戚关系。</p>

<p>接下来 $p$ 行：每行两个数 $P_i,P_j$，询问 $P_i$ 和 $P_j$ 是否具有亲戚关系。</p>

<h2 id="输出格式-11">输出格式</h2>

<p>$p$ 行，每行一个 <code class="language-plaintext highlighter-rouge">Yes</code> 或 <code class="language-plaintext highlighter-rouge">No</code>。表示第 $i$ 个询问的答案为”具有”或”不具有”亲戚关系。</p>

<h2 id="输入输出样例-1-2">输入输出样例 #1</h2>

<h3 id="输入-1-2">输入 #1</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>6 5 3
1 2
1 5
3 4
5 2
1 3
1 4
2 3
5 6
</code></pre></div></div>

<h3 id="输出-1-2">输出 #1</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Yes
Yes
No
</code></pre></div></div>

<h2 id="完整代码-5">完整代码</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">5005</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">s</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="kt">void</span> <span class="nf">init_set</span><span class="p">(){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">find_set</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">?</span> <span class="n">x</span> <span class="o">:</span> <span class="n">find_set</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">x</span><span class="p">]);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">merge</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">){</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">find_set</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">find_set</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">){</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">s</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">p</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span> <span class="o">&gt;&gt;</span> <span class="n">p</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="o">--</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">y</span><span class="p">;</span>
        <span class="n">merge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span><span class="n">p</span><span class="o">--</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">y</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">find_set</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="n">find_set</span><span class="p">(</span><span class="n">y</span><span class="p">)){</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"No"</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Yes"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="p1111-修复公路">P1111 修复公路</h2>

<h2 id="题目背景-2">题目背景</h2>

<p>A 地区在地震过后，连接所有村庄的公路都造成了损坏而无法通车。政府派人修复这些公路。</p>

<h2 id="题目描述-11">题目描述</h2>

<p>给出 A 地区的村庄数 $N$，和公路数 $M$，公路是双向的。并告诉你每条公路的连着哪两个村庄，并告诉你什么时候能修完这条公路。问最早什么时候任意两个村庄能够通车，即最早什么时候任意两条村庄都存在至少一条修复完成的道路（可以由多条公路连成一条道路）。</p>

<h2 id="输入格式-12">输入格式</h2>

<p>第 $1$ 行两个正整数 $N,M$。</p>

<p>下面 $M$ 行，每行 $3$ 个正整数 $x,y,t$，告诉你这条公路连着 $x,y$ 两个村庄，在时间 $t$ 时能修复完成这条公路。</p>

<h2 id="输出格式-12">输出格式</h2>

<p>如果全部公路修复完毕仍然存在两个村庄无法通车，则输出 $-1$，否则输出最早什么时候任意两个村庄能够通车。</p>

<h2 id="输入输出样例-1-3">输入输出样例 #1</h2>

<h3 id="输入-1-3">输入 #1</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4 4
1 2 6
1 3 4
1 4 5
4 2 3
</code></pre></div></div>

<h3 id="输出-1-3">输出 #1</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
</code></pre></div></div>

<h2 id="说明提示-3">说明/提示</h2>

<p>$1\leq x, y\leq N \le 10 ^ 3$，$1\leq M, t \le 10 ^ 5$。</p>

<h3 id="1-问题分析"><strong>1. 问题分析</strong></h3>

<p>题目要求找出最早时间使得所有村庄通过修复的公路连通。这本质上是求<strong>最小生成树（MST）的最大边权值</strong> ，因为 MST 的最大边是让整个图连通的”最后完成”的公路，其时间即为答案。</p>

<hr />

<h3 id="2-算法选择"><strong>2. 算法选择</strong></h3>

<p>使用 <strong>Kruskal 算法</strong> ，其核心思想是：</p>

<ul>
  <li>按公路修复时间从小到大排序。</li>
  <li>依次选择边，用并查集维护连通性。</li>
  <li>当所有村庄连通时（形成生成树），最后加入的边的时间即为答案。</li>
</ul>

<hr />

<h3 id="3-代码逻辑步骤"><strong>3. 代码逻辑步骤</strong></h3>

<h4 id="步骤-1初始化并查集"><strong>步骤 1：初始化并查集</strong></h4>

<ul>
  <li>每个村庄的父节点初始化为自己：</li>
</ul>

<h4 id="步骤-2输入数据"><strong>步骤 2：输入数据</strong></h4>

<ul>
  <li>
    <p>读取村庄数 <code class="language-plaintext highlighter-rouge">n</code> 和公路数 <code class="language-plaintext highlighter-rouge">m</code>。</p>
  </li>
  <li>
    <p>存储每条公路的连接村庄和修复时间：</p>
  </li>
</ul>

<h4 id="步骤-3按修复时间排序公路"><strong>步骤 3：按修复时间排序公路</strong></h4>

<ul>
  <li>
    <p>使用sort（）函数对公路按时间t升序排序：</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">sort</span><span class="p">(</span><span class="n">roads</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">roads</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">m</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="步骤-4kruskal-算法构建生成树"><strong>步骤 4：Kruskal 算法构建生成树</strong></h4>

<ul>
  <li>
    <p>遍历排序后的公路，尝试合并两个村庄：</p>

    <p>int connected = 0; // 记录已合并的边数</p>

    <p>int ans = 0;       // 记录最大时间</p>

    <p>for (int i = 1; i &lt;= m; i++) {</p>

    <p>​    int x_root = find_set(roads[i].x);</p>

    <p>​    int y_root = find_set(roads[i].y);</p>

    <p>​    if (x_root != y_root) {</p>

    <p>​        s[y_root] = x_root; // 合并集合</p>

    <p>​        connected++;        // 更新连通边数</p>

    <p>​        ans = max(ans, roads[i].t); // 更新最大时间</p>

    <p>​    }</p>

    <p>}</p>
  </li>
</ul>

<h4 id="步骤-5判断是否连通"><strong>步骤 5：判断是否连通</strong></h4>

<ul>
  <li>
    <p>如果生成树边数</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  connected == n-1
</code></pre></div>    </div>

    <p>输出最大时间</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ans
</code></pre></div>    </div>

    <p>否则输出</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  -1
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="4-关键点总结"><strong>4. 关键点总结</strong></h3>

<ol>
  <li><strong>并查集优化</strong> ：
    <ul>
      <li><strong>路径压缩</strong> ：<code class="language-plaintext highlighter-rouge">find_set</code> 使用路径压缩优化，确保查找根节点的时间复杂度接近 O(1)。</li>
      <li><strong>按秩合并</strong> ：虽然代码中没有显式按秩合并，但按时间排序边已隐含了优先选择短时间的边。</li>
    </ul>
  </li>
  <li><strong>贪心策略</strong> ：
    <ul>
      <li>按时间升序处理边，确保每一步都选择当前可选的最早完成的公路，从而保证最终时间最小。</li>
    </ul>
  </li>
  <li><strong>生成树性质</strong> ：
    <ul>
      <li>当生成树边数达到 <code class="language-plaintext highlighter-rouge">n-1</code> 时，所有村庄连通，无需继续处理后续边。</li>
    </ul>
  </li>
</ol>

<h2 id="完整代码-6">完整代码</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">1005</span><span class="p">,</span> <span class="n">M</span> <span class="o">=</span> <span class="mi">100005</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">s</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="kt">int</span> <span class="nf">find_set</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">!=</span> <span class="n">s</span><span class="p">[</span><span class="n">x</span><span class="p">]){</span>
        <span class="n">s</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_set</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">x</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="n">x</span><span class="p">];</span>
<span class="p">}</span>
<span class="cm">/*
int find_set(int x){
    return x == s[x] ? x : find_set(s[x]);
}
*/</span>
<span class="k">struct</span> <span class="nc">road</span><span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">t</span><span class="p">;</span>
<span class="p">}</span><span class="n">roads</span><span class="p">[</span><span class="n">M</span><span class="p">];</span>
<span class="kt">bool</span> <span class="nf">cmp</span><span class="p">(</span><span class="n">road</span> <span class="n">a</span><span class="p">,</span> <span class="n">road</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">t</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">t</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">roads</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">roads</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span> <span class="o">&gt;&gt;</span> <span class="n">roads</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">t</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">sort</span><span class="p">(</span><span class="n">roads</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">roads</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">m</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">connected_city_line</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ans</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">find_set</span><span class="p">(</span><span class="n">roads</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">find_set</span><span class="p">(</span><span class="n">roads</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">!=</span><span class="n">y</span><span class="p">){</span>
            <span class="n">s</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">connected_city_line</span><span class="o">++</span><span class="p">;</span>
            <span class="n">ans</span><span class="o">=</span><span class="n">max</span><span class="p">(</span><span class="n">roads</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">t</span><span class="p">,</span> <span class="n">ans</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">connected_city_line</span> <span class="o">!=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">){</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="修改数组">修改数组</h2>

<h2 id="题目描述-12">题目描述</h2>

<p>给定一个长度为 $ N $ 的数组 $ A = [A_1, A_2, \dots, A_N] $，数组中可能有重复出现的整数。</p>

<p>现在小明要按以下方法将其修改为没有重复整数的数组。小明会依次修改 $ A_2, A_3, \dots, A_N $。</p>

<p>当修改 $ A_i $ 时，小明会检查 $ A_i $ 是否在 $ A_1 \sim A_{i-1} $ 中出现过。如果出现过，则小明会给 $ A_i $ 加上 1；如果新的 $ A_i $ 仍在之前出现过，小明会持续给 $ A_i $ 加 1，直到 $ A_i $ 没有在 $ A_1 \sim A_{i-1} $ 中出现过。</p>

<p>当 $ A_N $ 也经过上述修改之后，显然 $ A $ 数组中就没有重复的整数了。</p>

<p>现在给定初始的 $ A $ 数组，请你计算出最终的 $ A $ 数组。</p>

<hr />

<h2 id="输入描述-3">输入描述</h2>

<p>第一行包含一个整数 $ N $。</p>

<p>第二行包含 $ N $ 个整数 $ A_1, A_2, \dots, A_N $。</p>

<p>其中，$ 1 \leq N \leq 10^5 $，$ 1 \leq A_i \leq 10^6 $。</p>

<hr />

<h2 id="输出描述-3">输出描述</h2>

<p>输出 $ N $ 个整数，依次是最终的 $ A_1, A_2, \dots, A_N $。</p>

<hr />

<h2 id="输入输出样例-3">输入输出样例</h2>

<h3 id="示例">示例</h3>

<h4 id="输入-1">输入</h4>

<p>5 2 1 1 3 4</p>

<h4 id="输出-1">输出</h4>

<p>2 1 3 4 5</p>

<hr />

<h2 id="运行限制-2">运行限制</h2>

<ul>
  <li>最大运行时间：1s</li>
  <li>最大运行内存：256M</li>
</ul>

<h2 id="hash函数解题代码">hash函数解题代码</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span><span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">100006</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">M</span> <span class="o">=</span> <span class="mi">2000000</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">hash_a</span><span class="p">[</span><span class="n">M</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">while</span><span class="p">(</span><span class="n">hash_a</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>
            <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">hash_a</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>


      </div>
    
      <footer class="post-footer">
        <div class="post-categories">
          分类：
          
            <span class="post-category">basic</span>
          
        </div>
        
        
        
        <div class="post-navigation">
          
            <a class="prev-post" href="/advanced/2024/03/21/real-world-application.html">
              ← 实战应用：使用动态规划解决背包问题
            </a>
          
          
          
        </div>
      </footer>
    </article>
  </div>
</div>

<style>
.github-style-container {
  min-height: calc(100vh - 100px);
}

.post-wrapper {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem;
  background-color: #ffffff;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  margin-top: 2rem;
  margin-bottom: 2rem;
  border: 1px solid #e1e4e8;
}

.post {
  width: 100%;
}

.post-header {
  margin-bottom: 2rem;
  text-align: center;
}

.post-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: #24292e;
  margin-bottom: 1rem;
  line-height: 1.2;
}

.post-meta {
  color: #586069;
  font-size: 1rem;
  margin-bottom: 1rem;
}

.post-meta time {
  margin-right: 1rem;
}

.post-author a {
  color: #0366d6;
  text-decoration: none;
}

.post-author a:hover {
  text-decoration: underline;
}

.post-content {
  color: #24292e;
  line-height: 1.8;
  margin-bottom: 3rem;
}

.post-content h2 {
  font-size: 1.8rem;
  margin: 2.5rem 0 1.5rem;
  color: #24292e;
  font-weight: 600;
  padding-bottom: 0.3rem;
  border-bottom: 1px solid #eaecef;
}

.post-content h3 {
  font-size: 1.5rem;
  margin: 2rem 0 1.25rem;
  color: #24292e;
  font-weight: 600;
}

.post-content p {
  margin-bottom: 1.5rem;
}

.post-content pre {
  border-radius: 6px;
  padding: 1rem;
  overflow: auto;
  margin: 1.5rem 0;
  background-color: #f6f8fa;
  border: 1px solid #eaecef;
}

.post-content code {
  font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
  font-size: 0.9rem;
  background-color: #f6f8fa;
  padding: 0.2em 0.4em;
  border-radius: 3px;
}

.post-content pre code {
  padding: 0;
  background-color: transparent;
}

.post-content blockquote {
  border-left: 4px solid #dfe2e5;
  padding-left: 1rem;
  margin-left: 0;
  color: #6a737d;
}

.post-content ul, .post-content ol {
  margin-bottom: 1.5rem;
  padding-left: 2rem;
}

.post-content img {
  max-width: 100%;
  border-radius: 6px;
  margin: 1.5rem 0;
  border: 1px solid #eaecef;
}

.post-content a {
  color: #0366d6;
  text-decoration: none;
}

.post-content a:hover {
  text-decoration: underline;
}

.post-footer {
  padding-top: 2rem;
  border-top: 1px solid #eaecef;
  color: #586069;
}

.post-categories, .post-tags {
  margin-bottom: 1rem;
}

.post-category, .post-tag {
  display: inline-block;
  padding: 0.3rem 0.8rem;
  margin-right: 0.5rem;
  border-radius: 2rem;
  background: #f1f8ff;
  font-size: 0.8rem;
  color: #0366d6;
  border: 1px solid #c8e1ff;
}

.post-navigation {
  display: flex;
  justify-content: space-between;
  margin-top: 2rem;
  flex-wrap: wrap;
}

.prev-post, .next-post {
  color: #0366d6;
  text-decoration: none;
  margin: 0.5rem 0;
  display: inline-block;
}

.prev-post:hover, .next-post:hover {
  text-decoration: underline;
}

@media (max-width: 768px) {
  .post-wrapper {
    padding: 1rem;
    margin-top: 1rem;
    margin-bottom: 1rem;
  }
  
  .post-title {
    font-size: 2rem;
  }
  
  .post-navigation {
    flex-direction: column;
    gap: 1rem;
  }
}
</style>
  </main>
  <footer class="site-footer">
    <div class="container">
      <p>© 2025 Blog Dejin. Have a good day!</p>
    </div>
  </footer>
</body>
</html>